[{"type":"text","text":"## Enhanced MCP Search Tool with Document Type and Metadata Filters\n*Source: claude-mem://observation/10631*\n\n**Added type-specific filtering to unified search tool supporting observations, sessions, prompts with metadata filters.**\n\nThe unified search tool in the MCP search server was enhanced with granular filtering capabilities. Four new optional parameters were added to the search tool's input schema: a 'type' parameter to filter by document type (observations/sessions/prompts), an 'obs_type' parameter to filter observations by their observation type, a 'concepts' parameter to filter by concept tags, and a 'files' parameter to filter by file paths. The obs_type, concepts, and files filters are observation-specific and only take effect when the type parameter is set to \"observations\". This enhancement allows clients to perform more targeted searches through the MCP interface while maintaining backward compatibility since all new parameters are optional.\n\n---\nType: feature | Facts: File src/servers/search-server.ts search tool inputSchema extended with new filter parameters; New type parameter filters by document type: observations, sessions, or prompts; New obs_type parameter filters observations by type (decision, bugfix, feature, refactor, discovery, change); New concepts parameter filters observations by concept tags, accepts string or array; New files parameter filters observations by file paths with partial matching, accepts string or array; Type-specific filters (obs_type, concepts, files) only apply when type equals observations | Concepts: what-changed, how-it-works, pattern | Files: src/servers/search-server.ts\n\n---\nDate: 11/17/2025, 9:21:49 PM\n\n---\n\n## Contextualize Tool for Comprehensive Project Overview\n*Source: claude-mem://observation/10597*\n\n**New tool provides one-stop project context with recent activity summaries and timeline visualization.**\n\nA comprehensive 'contextualize' tool was added to provide a quick project overview in a single request. The tool fetches recent observations (default 7), sessions (default 7), and user prompts (default 3), then identifies the newest activity across all types to use as a timeline anchor. The output is structured in sections: header with overview statistics and latest activity timestamp, followed by summaries of recent observations (top 3 with type emoji icons), recent sessions (top 3), and recent user prompts (all, truncated to 60 chars). The timeline section shows the last 3 days of activity around the newest item, displaying up to 5 entries per day with timestamps and type-specific icons. All activity is pulled using configurable limits, and timeline depth defaults to 5 records before/after the newest item. The tool is designed as a starting point for exploration, with footer text suggesting more specialized tools for deeper investigation. This addresses the \"what's been happening\" use case with minimal token overhead.\n\n---\nType: feature | Facts: Added 'contextualize' tool that fetches recent observations (7), sessions (7), and user prompts (3) in configurable quantities; Tool identifies newest activity across all memory types and builds timeline centered around it; Output includes three summary sections showing top 3 items from each category with type icons; Timeline section displays last 3 days of activity with up to 5 items per day in reverse chronological order; All limits configurable via parameters: observations_limit, sessions_limit, prompts_limit, timeline_depth; Defaults to current working directory basename for project filtering; Footer suggests other tools for deeper exploration (search, timeline, decisions, changes, how_it_works) | Concepts: what-changed, how-it-works, pattern | Files: src/servers/search-server.ts\n\n---\nDate: 11/17/2025, 8:36:23 PM\n\n---\n\n## Semantic Shortcut Tools for Common Search Patterns\n*Source: claude-mem://observation/10596*\n\n**Added three convenience tools for frequently accessed observation categories: decisions, changes, and how-it-works.**\n\nThree semantic shortcut tools were added to the MCP search server to provide convenient access to commonly searched observation patterns. The 'decisions' tool is equivalent to find_by_type with type=\"decision\", filtering for observations where important architectural, technical, or process decisions were made. The 'changes' tool provides a broader search by combining results from type=\"change\", concept=\"change\", and concept=\"what-changed\", deduplicating IDs before applying semantic ranking with a \"what changed\" query. The 'how_it_works' tool searches for concept=\"how-it-works\" observations and applies semantic ranking with \"how it works architecture\" to surface the most relevant architectural documentation. All three tools use the metadata-first, semantic-enhanced search pattern where SQLite filters by type/concept first, then ChromaDB ranks results by semantic relevance. They support the same index/full format options as other search tools, defaulting to index format for token efficiency. When ChromaDB is unavailable, they fall back to SQLite-only searches with chronological ordering.\n\n---\nType: feature | Facts: Added 'decisions' tool as shortcut for finding decision-type observations with semantic ranking; Added 'changes' tool that searches type=change OR concept=change OR concept=what-changed with deduplication; Added 'how_it_works' tool for finding how-it-works concept observations with architecture-focused semantic queries; All three tools support index and full output formats with same token-efficiency guidelines as other search tools; Semantic shortcuts use metadata-first filtering followed by ChromaDB semantic ranking for relevance; Changes tool combines results from multiple filters (type and concepts) before semantic ranking; Tools fall back to SQLite-only search when ChromaDB unavailable | Concepts: what-changed, how-it-works, pattern | Files: src/servers/search-server.ts\n\n---\nDate: 11/17/2025, 8:35:32 PM\n\n---\n\n## Unified Timeline Tool Combining Anchor and Query Modes\n*Source: claude-mem://observation/10595*\n\n**New timeline tool supports both anchor-based and query-based timeline exploration in single interface.**\n\nA new unified 'timeline' tool was added to the MCP search server that combines the capabilities of get_context_timeline and get_timeline_by_query into a single interface. The tool accepts either an anchor parameter for anchor-based timeline exploration or a query parameter for search-based timeline discovery, but not both. Input validation ensures exactly one parameter is provided with helpful error messages guiding proper usage. In query mode, the tool performs a hybrid semantic search (ChromaDB with FTS5 fallback) to find the most relevant observation matching the query, then uses that observation as the timeline anchor. In anchor mode, it supports three anchor types: numeric observation IDs, session ID strings (format \"S123\" or \"#S123\"), and ISO timestamp strings. Both modes use the same timeline rendering logic with observations, sessions, and prompts interleaved chronologically, grouped by day, and formatted with tables for observations and standalone entries for sessions/prompts. The header adapts to the mode, showing the query and matched anchor for query-based searches or just the anchor identifier for anchor-based searches.\n\n---\nType: feature | Facts: Added new 'timeline' tool that consolidates get_context_timeline and get_timeline_by_query functionality; Timeline tool accepts either anchor parameter (observation ID, session ID, or ISO timestamp) or query parameter (natural language search); Tool validates that exactly one of anchor or query is provided with clear error messages; Query mode performs hybrid semantic search to find best matching observation and uses it as timeline anchor; Anchor mode supports three anchor types: numeric observation ID, session ID string (S123), or ISO timestamp string; Timeline rendering identical for both modes with chronologically sorted observations, sessions, and prompts grouped by day; Header changes based on mode showing either \"Timeline for query\" or \"Timeline around anchor\" | Concepts: what-changed, how-it-works, pattern | Files: src/servers/search-server.ts\n\n---\nDate: 11/17/2025, 8:34:35 PM\n\n---\n\n## Unified Search Tool Added to MCP Server\n*Source: claude-mem://observation/10594*\n\n**New unified search tool queries all memory types simultaneously with combined chronological results.**\n\nA new unified 'search' tool was added to the MCP search server that queries all memory types (observations, sessions, and user prompts) in a single operation. Unlike the existing type-specific tools (search_observations, search_sessions, search_user_prompts), this unified tool performs a single ChromaDB query without doc_type filtering, then categorizes results based on metadata and hydrates each type from SQLite. All results are combined into a single array with type discriminators, sorted chronologically according to the orderBy parameter, and then limited. The output format distinguishes between types when rendering results, using the appropriate formatter (formatObservationIndex, formatSessionIndex, formatUserPromptIndex) based on the item type. This provides a more efficient search workflow when users want to see all relevant context across different memory types without running multiple separate searches.\n\n---\nType: feature | Facts: Added new 'search' tool that queries observations, sessions, and user prompts in a single operation; Unified search categorizes ChromaDB results by doc_type metadata field (observation, session_summary, user_prompt); Results from all document types combined and sorted chronologically by epoch timestamp; Limit applies across all document types after merging results; Index format header shows breakdown of result counts by type (e.g., \"5 obs, 3 sessions, 2 prompts\"); Unified search uses same hybrid ChromaDB + FTS5 fallback strategy as type-specific search tools | Concepts: what-changed, how-it-works, pattern | Files: src/servers/search-server.ts\n\n---\nDate: 11/17/2025, 8:33:18 PM"}]